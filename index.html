<!DOCTYPE html>
<html>
  <head>
    <link rel='stylesheet' href='main.css'>
  </head>
  <body>
    <h3>
      Stream Definitions
    </h3>
    <table>
      <thead>
        <tr>
          <th>Stream No.</th>
          <th>Stream type</th>
          <th><em>CP = mC<sub>p</sub></em> (kW&middot;K<sup>-1</sup>)</th>
          <th><em>T<sub>s</sub></em> (&deg;C)</th>
          <th><em>T<sub>t</sub></em> (&deg;C)</th>
          <th><em>Q</em> (kW)</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody data-bind='foreach: streams'>
        <tr>
          <td>
            <span data-bind='text: id'></span>
          </td>
          <td>
            <span data-bind='text: type'></span>
          </td>
          <td>
            <input type='number' data-bind='textInput: _CP'>
          </td>
          <td>
            <input type='number' data-bind='textInput: _supplyTemp'>
          </td>
          <td>
            <input type='number' data-bind='textInput: _targetTemp'>
          </td>
          <td>
            <span data-bind='text: heatLoad'></span>
          </td>
          <td>
            <button data-bind='click: remove'>Remove</button>
          </td>
        </tr>
      </tbody>
    </table>
    <p>
      <button data-bind='click: addStream'>Add Stream</button>
    </p>
    <p>
      Q<sub>net</sub>: <strong data-bind='text: netHeatLoad'></strong>
      <strong>kW</strong>
    </p>

    <h3>
      Minimum Approach temperature
    </h3>
    <p>
      Limits:
      <em>
        0 &le; &Delta; T<sub>min</sub> &le;
        <span data-bind='text: maxDT'></span>
      </em>
    </p>
    <p>
      Select &Delta;T<sub>min</sub> value:
      <input type='number' data-bind='textInput: _DTMin'>
    </p>

    <h3>
      Intervals
    </h3>
    <p>
      <button data-bind='click: calculateIntervals'>
        Calculate Intervals
      </button>
    </p>

    <table>
      <thead>
        <tr>
          <th>Interval</th>
          <th>Temp. Range (Hot Side) (&deg;C)</th>
          <th>Temp. Range (Cold Side) (&deg;C)</th>
          <th>&Delta;T (&deg;C)</th>
          <th>Streams</th>
          <th>Q<sub>net</sub> (kW)</th>
          <th>Surplus or Deficit?</th>
        </tr>
      </thead>
      <tbody data-bind='foreach: intervals'>
        <tr>
          <td data-bind='text: index'></td>
          <td data-bind='text: hotSideTempRange()'></td>
          <td data-bind='text: coldSideTempRange()'></td>
          <td data-bind='text: DT()'></td> 
          <td data-bind='text: streamIds().join(", ")'></td>
          <td data-bind='text: netHeatLoad()'></td>
          <td>
            <strong data-bind='text: surplusOrDeficit()'></strong>
          </td>
        </tr>
      </tbody>
    </table>

    <p>
      Overall Q<sub>net</sub>:
      <strong data-bind='text: netHeatLoad'></strong>
      <strong>kW</strong>
      <br>
      Minimum Heating Utility:
      <strong data-bind='text: minHeatingUtility'></strong>
      <strong>kW</strong>
      <br>
      Minimum Cooling Utility:
      <strong data-bind='text: minCoolingUtility'></strong>
      <strong>kW</strong>
      <br>
      Pinch Temperature:
      <strong data-bind='text: pinchTemperature'></strong>
      <strong>&deg;C</strong>
      <br>
    </p>

    <h3>References</h3>
    <p>
      (max dtmin value - get reference)<br>
      - Heat loads are shown as positive for heat to be added and negative for heat to be removed
      as per coulson & richardson <br>
      (Chemical engineering design - coulson & Richardson)
    </p>

    <script type='text/javascript' src='node_modules/knockout/build/output/knockout-latest.js'></script>
    <script type='text/javascript' src='pinch.js'></script>
  </body>
</html>
